<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Multi-channel Controller</title>

  <style>
    body {
      margin: 0;
      padding: 30px;
      background: #000;
      color: #fff;
      font-family: monospace;
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 30px;
    }

    h1, h2 {
      margin: 10px 0;
      font-weight: normal;
    }

    .video-wrapper {
      width: 80vw;
      max-width: 400px;      /* Shorts 竖屏 */
      aspect-ratio: 9 / 16;
    }

    .video-wrapper iframe {
      width: 100%;
      height: 100%;
      border: none;
    }

    .image-row {
      display: flex;
      gap: 10px;
    }

    .image-row img {
      width: 20vw;
      max-width: 300px;
    }

    pre {
      width: 90vw;
      max-width: 1000px;
      background: #111;
      padding: 20px;
      overflow-x: auto;
      font-size: 14px;
      line-height: 1.4;
      border: 1px solid #333;
    }

    code {
      color: #9ef;
    }

    .concept-text {
      width: 90vw;
      max-width: 900px;
      margin-top: 20px;
      font-size: 16px;
      line-height: 1.6;
      color: #ddd;
    }
  </style>
</head>

<body>

  <h1>Change the Circle</h1>

  <!-- YouTube Shorts -->
  <div class="video-wrapper">
    <iframe
      src="https://www.youtube.com/embed/zxtEdINMacE"
      title="YouTube Shorts demo"
      allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
      allowfullscreen>
    </iframe>
  </div>

  <h2>Arduino Code</h2>
  <pre><code>
#define BTN1 13
#define BTN2 12
#define BTN3 27
#define BTN4 15
#define BTN5 14
#define POT_PIN A0

void setup() {
  pinMode(POT_PIN, INPUT);
  Serial.begin(115200);
  while(!Serial);
  Serial.println("ready");
}

void loop() {
  Serial.print(digitalRead(BTN1));
  Serial.print(',');
  Serial.print(digitalRead(BTN2));
  Serial.print(',');
  Serial.print(digitalRead(BTN3));
  Serial.print(',');
  Serial.print(digitalRead(BTN4));
  Serial.print(',');
  Serial.print(digitalRead(BTN5));
  Serial.print(',');
  Serial.println(analogRead(POT_PIN));
  delay(10);
}
  </code></pre>

  <h2>Processing Code</h2>
  <pre><code>
import processing.serial.*;

Serial myConnection2;
String incomingString = "";

PVector pos;
float diam;
float mode;
float colorH;

void setup(){
  size(800, 600);
  printArray(Serial.list());
  colorMode(HSB, 255);

  pos = new PVector(width*0.5, height*0.5);
  diam = 5;
  mode = 0;
  colorH = 0;

  myConnection2 = new Serial(this, Serial.list()[2], 230400);
  myConnection2.bufferUntil('\n');
}

void draw(){
  background(255);

  if(mode == 1){
    pos = new PVector(
      random(diam/2, width - diam/2),
      random(diam/2, height - diam/2)
    );
  } else {
    pos = new PVector(width*0.5, height*0.5);
  }

  noStroke();
  fill(colorH, 150, 255);
  circle(pos.x, pos.y, diam);
}

void serialEvent(Serial conn){
  incomingString = conn.readString();
  String[] values = split(trim(incomingString),',');

  if(values.length == 3){
    diam = map(float(values[0]), 0, 4095, 0, height);
    colorH = map(float(values[1]), 0, 4095, 0, 255);
    mode = float(values[2]);
  }
}
  </code></pre>

  <div class="concept-text">
    <p><strong>2 potentiometers and 1 button</strong></p>
    <p>
      First, I set the color mode to HSB. One potentiometer controls the hue
      of the circle, while the button switches between a static center mode
      and a random movement mode.
    </p>
  </div>

  <h2>Processing Code 2</h2>
  <pre><code>
import processing.serial.*;

Serial myConnection;
String incomingString = "";

PVector pos;
float diam;
float mode;
float colorS;

void setup(){
  size(800, 600);
  printArray(Serial.list());
  colorMode(HSB, 255);

  pos = new PVector(width*0.5, height*0.5);
  diam = 5;
  mode = 0;
  colorS = 0;

  myConnection = new Serial(this, Serial.list()[2], 115200);
  myConnection.bufferUntil('\n');
}

void draw(){
  if(mode == 1){
    background(0);
  } else {
    background(255);
  }

  fill(230, colorS, 255);
  circle(pos.x, pos.y, diam);
}

void serialEvent(Serial conn){
  incomingString = conn.readString();
  String[] values = split(trim(incomingString),',');

  if(values.length == 3){
    diam = map(float(values[0]), 0, 4095, 0, height);
    colorS = map(float(values[1]), 0, 4095, 0, 255);
    mode = float(values[2]);
  }
}
  </code></pre>

  <div class="concept-text">
    <p><strong>2 potentiometers and 1 button</strong></p>
    <p>
      In this version, one potentiometer controls the saturation of the circle,
      while the button triggers a background mode change. The interaction
      emphasizes how minimal physical input can produce varied visual behavior.
    </p>
  </div>

</body>
</html>
